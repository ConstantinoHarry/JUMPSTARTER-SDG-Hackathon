<!DOCTYPE html>
<html lang="en" data-theme="light" data-lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AIIGood â€“ Journal</title>

  <!-- fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Space+Grotesk:wght@700&display=swap" rel="stylesheet"/>

  <!-- shared stylesheet -->
  <link rel="stylesheet" href="/styles.css"/>

  <!-- Pages specific style-->
   <link rel="stylesheet" href="/journal/journal-styles.css"/>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <!-- journal-specific stylesheet (optional â€“ we add the few rules inline) -->
  <style>
    /* --------------------------------------------------------------
       Journal-specific CSS (kept tiny â€“ everything else comes from styles.css)
       -------------------------------------------------------------- */
    .journal-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:1rem; }
    .journal-header h2 { margin:0; font-size:1.6rem; }

    .mood-picker { display:flex; gap:.5rem; margin:1rem 0; flex-wrap:wrap; justify-content:center; }
    .mood-btn {
      width:48px; height:48px; border-radius:50%; display:flex; align-items:center; justify-content:center;
      background:#eee; cursor:pointer; transition:transform .2s, background .2s;
      font-weight:600; font-size:.85rem;
    }
    .mood-btn:hover { transform:scale(1.1); }
    .mood-btn.selected { background:var(--primary); color:#fff; }

    .metrics-grid { display:grid; grid-template-columns:repeat(auto-fit, minmax(140px,1fr)); gap:.75rem; margin:1.5rem 0; }
    .metric { background:#f8f9fa; padding:.75rem; border-radius:.6rem; text-align:center; font-size:.9rem; }

    #entriesList { margin-top:1.5rem; }
    .entry { background:#fff; padding:1rem; border-radius:.8rem; margin-bottom:.75rem; box-shadow:0 2px 6px rgba(0,0,0,.06); }
    .entry .date { font-weight:600; color:var(--primary); }
    .entry .note { margin-top:.4rem; font-size:.95rem; color:#333; }

    #aiInsight { margin-top:1rem; padding:1rem; border-radius:.8rem; background:#e6f9f7; display:none; }

    [data-theme="dark"] .mood-btn { background:#333; }
    [data-theme="dark"] .metric { background:#2d2d2d; }
    [data-theme="dark"] .entry { background:#2d2d2d; }
    [data-theme="dark"] #aiInsight { background:#1e3a3a; color:#fff; }
  </style>
</head>
<body>

<!-- top navigation -->
  <nav class="top-nav">
    <a href="/index.html">HOME</a>
    <a href="/chatbot/chatbot.html">Chat</a>
    <a href="/journal/journal.html">Journal</a>
    <a href="/task_manager/task_manager.html">Tasks</a>
    <a href="/Family-Circle/family_cirle.html" class="active">Family Circle</a>
  </nav>

<!-- hero -->
<header class="hero">
  <div class="container">
    <div class="team-badge">Team: AIIGood</div>
    <h1>Wellness Journal</h1>
    <p data-lang-en="Track your mood and reflections." data-lang-yue="è¨˜éŒ„ä½ å˜…å¿ƒæƒ…åŒåæ€ã€‚">
      Track your mood and reflections.
    </p>
  </div>
</header>

<!-- main app -->
<section class="app">
  <div id="journal">

    <div class="journal-header">
      <h2>Mood Journal</h2>
      <button id="addEntryBtn" class="add-entry">+ New Entry</button>
    </div>

  <div class="quick-actions">
    <button class="quick-action-btn" onclick="showEntryModal(3)">
      ðŸŽ¤ Quick Voice Entry
    </button>
    <button class="quick-action-btn" onclick="toggleGhostWriter()">
      âœ¨ Toggle Ghost Writer
    </button>
  </div>

    <!-- Mood picker -->
    <div class="mood-picker" role="group" aria-label="Pick your mood">
      <button class="mood-btn" data-mood="1" aria-label="Mood 1 of 5">Bad</button>
      <button class="mood-btn" data-mood="2" aria-label="Mood 2 of 5">Sad</button>
      <button class="mood-btn" data-mood="3" aria-label="Mood 3 of 5">Neutral</button>
      <button class="mood-btn" data-mood="4" aria-label="Mood 4 of 5">Happy</button>
      <button class="mood-btn" data-mood="5" aria-label="Mood 5 of 5">Great</button>
    </div>

    <!-- Chart -->
    <div class="chart-card" style="margin:1.5rem 0;">
      <canvas id="moodChart" height="220"></canvas>
    </div>

    <!-- AI Insight -->
    <div id="aiInsight" class="box"></div>

    <!-- Metrics -->
    <div class="metrics-grid">
      <div class="metric"><strong>Avg Mood:</strong> <span id="avgMood">-</span></div>
      <div class="metric"><strong>Current Streak:</strong> <span id="streak">-</span></div>
      <div class="metric"><strong>Longest Streak:</strong> <span id="longestStreak">-</span></div>
      <div class="metric"><strong>Mood Distribution:</strong> <span id="distro">-</span></div>
    </div>

    <!-- Entries list -->
    <div id="entriesList"></div>

  </div>
</section>

<!-- journal logic -->
<script src="/journal/journal.js"></script>
<script>
  (function detectBlockingOverlays() {
  function fmt(el){
    if(!el) return 'none';
    return el.tagName.toLowerCase() + (el.id?('#'+el.id):'') + (el.className?('.'+String(el.className).replace(/\s+/g,'.')):'') + ` (z=${getComputedStyle(el).zIndex || 'auto'})`;
  }

  // element currently under the center of the viewport
  const cx = Math.round(innerWidth/2), cy = Math.round(innerHeight/2);
  const topAtCenter = document.elementFromPoint(cx, cy);
  console.group('%cBlocking overlay diagnostic', 'font-weight:bold; color:#0a6;');
  console.log('Center coords:', cx, cy);
  console.log('Top element at center:', fmt(topAtCenter));
  console.log('Full element:', topAtCenter);
  console.groupEnd();

  // scan for large fixed/absolute/sticky elements
  const candidates = Array.from(document.querySelectorAll('body *')).filter(el=>{
    const s = getComputedStyle(el);
    if(!el.offsetParent && s.position==='static') return false;
    if(!/fixed|absolute|sticky/.test(s.position)) return false;
    const rect = el.getBoundingClientRect();
    if(rect.width===0 || rect.height===0) return false;
    const area = rect.width * rect.height;
    const vpArea = innerWidth * innerHeight;
    const coverage = area / vpArea;
    return coverage > 0.30; // covers more than 30% of viewport
  });

  if(candidates.length===0){
    console.log('No large fixed/absolute/sticky elements found that cover >30% of the viewport.');
  } else {
    console.group('Large overlay candidates (covers >30% of viewport):');
    candidates.forEach((el, i)=>{
      const rect = el.getBoundingClientRect();
      console.log(`#${i+1}:`, fmt(el), 'rect=', rect, 'coverage=', ((rect.width*rect.height)/(innerWidth*innerHeight)).toFixed(2));
      // highlight visually:
      el.style.outline = '3px solid rgba(255,0,0,0.9)';
      el.dataset.__diagnostic_outline = '1';
      // temporarily allow clicks through (undoable by reload) so you can interact:
      el.style.pointerEvents = 'none';
      console.log('  -> pointer-events set to "none" and red outline applied (temporary)');
    });
    console.groupEnd();
  }

  console.log('If you see outlines, try interacting with the page now. To undo the temporary changes, reload the page.');
})();
</script>
</body>
</html>